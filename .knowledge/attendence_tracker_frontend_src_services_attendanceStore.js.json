{"is_source_file": true, "format": "JavaScript", "description": "This file manages an attendance tracking system's data store, including definitions for attendance records, snapshot management using localStorage, CRUD operations, and subscription mechanisms for UI updates. It provides functions for creating, updating, deleting, and listing attendance entries, as well as handling persistence and cross-tab synchronization.", "external_files": [], "external_methods": ["crypto.randomUUID"], "published": ["subscribe", "listRecords", "deleteRecord", "clearAll", "getApiBaseUrl", "tryApiSync", "attachCrossTabListener"], "classes": [], "methods": [{"name": "toLocalISODate(d)", "description": "Converts a Date object to ISO date string (YYYY-MM-DD) in local timezone.", "scope": "", "scopeKind": ""}, {"name": "defaultSnapshot()", "description": "Creates a default attendance snapshot with sample data for today.", "scope": "", "scopeKind": ""}, {"name": "safeJsonParse(raw)", "description": "Safely parses a JSON string, returning null on failure.", "scope": "", "scopeKind": ""}, {"name": "loadSnapshot()", "description": "Loads attendance snapshot from localStorage or returns default.", "scope": "", "scopeKind": ""}, {"name": "saveSnapshot(snapshot)", "description": "Saves a snapshot object to localStorage.", "scope": "", "scopeKind": ""}, {"name": "getState()", "description": "Returns the current attendance snapshot from storage.", "scope": "", "scopeKind": ""}, {"name": "setState(next)", "description": "Sets the current snapshot and notifies subscribers.", "scope": "", "scopeKind": ""}, {"name": "normalizeNewRecord(record)", "description": "Normalizes input data for a new attendance record, assigning IDs and timestamps.", "scope": "", "scopeKind": ""}, {"name": "createRecord(record)", "description": "Creates and adds a new attendance record.", "scope": "", "scopeKind": ""}, {"name": "updateRecord(id, patch)", "description": "Updates an existing attendance record by ID.", "scope": "", "scopeKind": ""}, {"name": "deleteRecord(id)", "description": "Deletes an attendance record by ID.", "scope": "", "scopeKind": ""}, {"name": "clearAll()", "description": "Removes all attendance records.", "scope": "", "scopeKind": ""}, {"name": "getApiBaseUrl()", "description": "Returns the API base URL if it is configured in environment variables.", "scope": "", "scopeKind": ""}, {"name": "tryApiSync()", "description": "Attempts to synchronize with API; currently a no-op if no API is configured.", "scope": "", "scopeKind": ""}, {"name": "attachCrossTabListener()", "description": "Adds a listener to synchronize data across browser tabs using localStorage events.", "scope": "", "scopeKind": ""}, {"name": "listRecords()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "subscribe(listener)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["crypto.randomUUID", "window.localStorage.getItem", "window.localStorage.setItem", "JSON.parse", "JSON.stringify", "setTimeout"], "search-terms": ["attendance record", "localStorage persistence", "attendance store", "subscribe", "createRecord", "updateRecord", "deleteRecord", "cross-tab sync"], "state": 2, "file_id": 13, "knowledge_revision": 30, "git_revision": "2a8bba6d6399497cf2555e5d324bf737bd78f106", "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^const STORAGE_KEY = \"attendance-tracker:v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "attachCrossTabListener", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function attachCrossTabListener() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "clearAll", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function clearAll() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "createRecord", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function createRecord(record) {$/", "language": "JavaScript", "kind": "function", "signature": "(record)"}, {"_type": "tag", "name": "defaultSnapshot", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function defaultSnapshot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "deleteRecord", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function deleteRecord(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function getApiBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getState", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function getState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listRecords", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function listRecords() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadSnapshot", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function loadSnapshot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "normalizeNewRecord", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function normalizeNewRecord(record) {$/", "language": "JavaScript", "kind": "function", "signature": "(record)"}, {"_type": "tag", "name": "safeJsonParse", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function safeJsonParse(raw) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw)"}, {"_type": "tag", "name": "saveSnapshot", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function saveSnapshot(snapshot) {$/", "language": "JavaScript", "kind": "function", "signature": "(snapshot)"}, {"_type": "tag", "name": "setState", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function setState(next) {$/", "language": "JavaScript", "kind": "function", "signature": "(next)"}, {"_type": "tag", "name": "subscribe", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function subscribe(listener) {$/", "language": "JavaScript", "kind": "function", "signature": "(listener)"}, {"_type": "tag", "name": "subscribers", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^const subscribers = new Set();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "toLocalISODate", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^function toLocalISODate(d) {$/", "language": "JavaScript", "kind": "function", "signature": "(d)"}, {"_type": "tag", "name": "tryApiSync", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export async function tryApiSync() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateRecord", "path": "/home/kavia/workspace/code-generation/attendance-tracker-10377-10386/attendence_tracker_frontend/src/services/attendanceStore.js", "pattern": "/^export function updateRecord(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}], "hash": "280e38aaca558862a5e7c5731723f9c3", "format-version": 4, "code-base-name": "attendence_tracker_frontend", "filename": "attendence_tracker_frontend/src/services/attendanceStore.js", "revision_history": [{"30": "2a8bba6d6399497cf2555e5d324bf737bd78f106"}]}